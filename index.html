<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Void Skies</title>
  <style>
    body { margin: 0; background: black; overflow: hidden; }
    canvas { display: block; margin: auto; background: #111; }
    #hud {
      position: absolute; top: 10px; left: 50%; transform: translateX(-50%);
      color: white; font-family: Arial, sans-serif; font-size: 18px;
      display: flex; gap: 30px; background: rgba(0,0,0,0.6);
      padding: 10px 20px; border-radius: 12px;
    }
    .bar {
      height: 12px; background: red; border-radius: 6px;
      margin-top: 5px; overflow: hidden;
    }
    .bar-inner {
      height: 100%; background: lime; width: 100%;
      transition: width 0.2s;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <div id="hud">
    <div>Player 1 HP <div class="bar"><div id="p1hp" class="bar-inner"></div></div></div>
    <div>Player 2 HP <div class="bar"><div id="p2hp" class="bar-inner"></div></div></div>
    <div>Boss HP <div class="bar"><div id="bossHp" class="bar-inner"></div></div></div>
  </div>
  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    class Player {
      constructor(x, y, color, keys) {
        this.x = x; this.y = y; this.color = color;
        this.size = 20; this.speed = 5;
        this.hp = 100; this.keys = keys;
        this.bullets = [];
      }
      draw() {
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.moveTo(this.x, this.y - this.size);
        ctx.lineTo(this.x - this.size, this.y + this.size);
        ctx.lineTo(this.x + this.size, this.y + this.size);
        ctx.closePath();
        ctx.fill();
      }
      move() {
        if (keysPressed[this.keys.up]) this.y -= this.speed;
        if (keysPressed[this.keys.down]) this.y += this.speed;
        if (keysPressed[this.keys.left]) this.x -= this.speed;
        if (keysPressed[this.keys.right]) this.x += this.speed;
        this.x = Math.max(this.size, Math.min(canvas.width - this.size, this.x));
        this.y = Math.max(this.size, Math.min(canvas.height - this.size, this.y));
      }
      shoot() {
        this.bullets.push(new Bullet(this.x, this.y - this.size, -7, this.color));
      }
    }

    class Bullet {
      constructor(x, y, dy, color) {
        this.x = x; this.y = y; this.dy = dy; this.color = color;
        this.size = 5;
      }
      update() { this.y += this.dy; }
      draw() {
        ctx.fillStyle = this.color;
        ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI*2); ctx.fill();
      }
    }

    class Boss {
      constructor() {
        this.x = canvas.width / 2; this.y = 100;
        this.size = 60; this.hp = 300;
        this.bullets = [];
        this.cooldown = 0;
      }
      draw() {
        ctx.fillStyle = "purple";
        ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI*2); ctx.fill();
      }
      update() {
        this.cooldown--;
        if (this.cooldown <= 0) {
          this.cooldown = 60;
          this.bullets.push(new Bullet(this.x, this.y+this.size, 5, "red"));
        }
        this.bullets.forEach(b => b.update());
        this.bullets = this.bullets.filter(b => b.y < canvas.height);
      }
    }

    function collide(a, b) {
      const dx = a.x - b.x, dy = a.y - b.y;
      return Math.hypot(dx, dy) < (a.size + b.size);
    }

    const player1 = new Player(canvas.width/3, canvas.height-100, "cyan", {up:"w",down:"s",left:"a",right:"d",shoot:" "});
    const player2 = new Player(canvas.width*2/3, canvas.height-100, "orange", {up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",shoot:"Enter"});
    const boss = new Boss();

    const keysPressed = {};
    document.addEventListener("keydown", e=>{
      keysPressed[e.key]=true;
      if(e.key===player1.keys.shoot) player1.shoot();
      if(e.key===player2.keys.shoot) player2.shoot();
    });
    document.addEventListener("keyup", e=>{ keysPressed[e.key]=false; });

    function updateHud() {
      document.getElementById("p1hp").style.width = player1.hp+"%";
      document.getElementById("p2hp").style.width = player2.hp+"%";
      document.getElementById("bossHp").style.width = (boss.hp/3)+"%";
    }

    function gameLoop() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      player1.move(); player2.move();
      player1.draw(); player2.draw();
      player1.bullets.forEach(b=>{ b.update(); b.draw(); });
      player2.bullets.forEach(b=>{ b.update(); b.draw(); });
      boss.update(); boss.draw();
      boss.bullets.forEach(b=>b.draw());

      player1.bullets = player1.bullets.filter(b=>{
        if(collide(b, boss)) { boss.hp -= 5; return false; }
        return b.y > 0;
      });
      player2.bullets = player2.bullets.filter(b=>{
        if(collide(b, boss)) { boss.hp -= 5; return false; }
        return b.y > 0;
      });

      boss.bullets.forEach(b=>{
        if(collide(b, player1)) { player1.hp -= 10; b.y = canvas.height+1; }
        if(collide(b, player2)) { player2.hp -= 10; b.y = canvas.height+1; }
      });

      if(player1.hp <= 0 || player2.hp <= 0) {
        ctx.fillStyle="white"; ctx.font="40px Arial"; ctx.fillText("Game Over!", canvas.width/2-100, canvas.height/2);
        return;
      }
      if(boss.hp <= 0) {
        ctx.fillStyle="white"; ctx.font="40px Arial"; ctx.fillText("Victory!", canvas.width/2-80, canvas.height/2);
        return;
      }

      updateHud();
      requestAnimationFrame(gameLoop);
    }
    gameLoop();
  </script>
</body>
</html>
